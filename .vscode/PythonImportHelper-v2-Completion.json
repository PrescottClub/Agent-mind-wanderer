[
    {
        "label": "streamlit",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "streamlit",
        "description": "streamlit",
        "detail": "streamlit",
        "documentation": {}
    },
    {
        "label": "os",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "os",
        "description": "os",
        "detail": "os",
        "documentation": {}
    },
    {
        "label": "json",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "json",
        "description": "json",
        "detail": "json",
        "documentation": {}
    },
    {
        "label": "time",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "time",
        "description": "time",
        "detail": "time",
        "documentation": {}
    },
    {
        "label": "random",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "random",
        "description": "random",
        "detail": "random",
        "documentation": {}
    },
    {
        "label": "ChatDeepSeek",
        "importPath": "langchain_deepseek",
        "description": "langchain_deepseek",
        "isExtraImport": true,
        "detail": "langchain_deepseek",
        "documentation": {}
    },
    {
        "label": "PromptTemplate",
        "importPath": "langchain_core.prompts",
        "description": "langchain_core.prompts",
        "isExtraImport": true,
        "detail": "langchain_core.prompts",
        "documentation": {}
    },
    {
        "label": "load_dotenv",
        "importPath": "dotenv",
        "description": "dotenv",
        "isExtraImport": true,
        "detail": "dotenv",
        "documentation": {}
    },
    {
        "label": "traceback",
        "kind": 6,
        "isExtraImport": true,
        "importPath": "traceback",
        "description": "traceback",
        "detail": "traceback",
        "documentation": {}
    },
    {
        "label": "SecretStr",
        "importPath": "pydantic",
        "description": "pydantic",
        "isExtraImport": true,
        "detail": "pydantic",
        "documentation": {}
    },
    {
        "label": "Path",
        "importPath": "pathlib",
        "description": "pathlib",
        "isExtraImport": true,
        "detail": "pathlib",
        "documentation": {}
    },
    {
        "label": "initialize_llm",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def initialize_llm():\n    \"\"\"åˆå§‹åŒ–LangChain DeepSeekæ¨¡å‹\"\"\"\n    try:\n        api_key = os.getenv('DEEPSEEK_API_KEY')\n        if not api_key:\n            st.error(\"è¯·åœ¨.envæ–‡ä»¶ä¸­é…ç½®DEEPSEEK_API_KEY\")\n            st.stop()\n        # DeepSeekæ¨ç†æ¨¡å‹ä¸æ”¯æŒtemperatureå‚æ•°\n        llm = ChatDeepSeek(\n            model=os.getenv('DEEPSEEK_MODEL', 'deepseek-reasoner'),",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "safe_parse_json",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def safe_parse_json(response_text):\n    \"\"\"å®‰å…¨è§£æAIè¿”å›çš„JSONï¼ŒåŒ…å«å®¹é”™æœºåˆ¶\"\"\"\n    try:\n        # å°è¯•ç›´æ¥è§£æJSON\n        result = json.loads(response_text)\n        return result\n    except json.JSONDecodeError:\n        try:\n            # å°è¯•æå–JSONéƒ¨åˆ†\n            start = response_text.find('{')",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "analyze_mood",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def analyze_mood(user_input, llm):\n    \"\"\"åˆ†æç”¨æˆ·æƒ…ç»ªå¹¶ç”Ÿæˆç²¾çµå›åº”\"\"\"\n    if not llm:\n        return safe_parse_json(\"\")\n    try:\n        prompt = PromptTemplate(\n            input_variables=[\"user_input\"],\n            template=MIND_SPRITE_PROMPT\n        )\n        chain = prompt | llm",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "render_sprite_display",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def render_sprite_display(mood, reaction):\n    \"\"\"æ¸²æŸ“ç²¾çµæ˜¾ç¤ºåŒºåŸŸ\"\"\"\n    sprite_emoji = SPRITE_EMOTIONS.get(mood, \"( Â´ â–½ ` )\")\n    st.markdown(f\"\"\"\n    <div class=\"sprite-container\">\n        <div class=\"sprite-emoji\">{sprite_emoji}</div>\n        <div class=\"sprite-name\">å°å¿µ (Xiao Nian)</div>\n        <div class=\"sprite-status\">å¿ƒæƒ…: {mood}</div>\n    </div>\n    \"\"\", unsafe_allow_html=True)",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "render_gift_display",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def render_gift_display(gift_type, gift_content):\n    \"\"\"æ¸²æŸ“ç¤¼ç‰©å±•ç¤ºåŒºåŸŸ\"\"\"\n    if gift_type and gift_content:\n        # ç¤¼ç‰©ç±»å‹å¯¹åº”çš„emoji\n        gift_icons = {\n            \"å…ƒæ°”å’’è¯­\": \"ğŸ­\",\n            \"ä¸‰è¡Œæƒ…è¯—\": \"ğŸŒ¸\",\n            \"æ¢¦å¢ƒç¢ç‰‡\": \"ğŸŒ™\",\n            \"å¿ƒæƒ…å£çº¸æè¿°\": \"ğŸ¨\"\n        }",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "render_history_gallery",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def render_history_gallery():\n    \"\"\"æ¸²æŸ“å¿ƒç»ªå›å“ç”»å»Š\"\"\"\n    if 'mood_history' in st.session_state and st.session_state.mood_history:\n        st.markdown(\"\"\"\n        <div class=\"history-gallery\">\n            <h3>ğŸ’– å¿ƒç»ªå›å“ç”»å»Š</h3>\n        </div>\n        \"\"\", unsafe_allow_html=True)\n        for i, record in enumerate(reversed(st.session_state.mood_history)):\n            timestamp = record.get('timestamp', 'åˆšåˆš')",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "stream_text",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def stream_text(text, delay=0.05):\n    \"\"\"æ‰“å­—æœºæ•ˆæœæ˜¾ç¤ºæ–‡æœ¬\"\"\"\n    placeholder = st.empty()\n    displayed_text = \"\"\n    for char in text:\n        displayed_text += char\n        placeholder.markdown(displayed_text)\n        time.sleep(delay)\ndef main():\n    \"\"\"ä¸»å‡½æ•°\"\"\"",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "main",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def main():\n    \"\"\"ä¸»å‡½æ•°\"\"\"\n    # åˆå§‹åŒ–session state\n    if 'mood_history' not in st.session_state:\n        st.session_state.mood_history = []\n    if 'current_mood' not in st.session_state:\n        st.session_state.current_mood = \"å¹³é™\"\n    if 'current_reaction' not in st.session_state:\n        st.session_state.current_reaction = \"\"\n    if 'current_gift' not in st.session_state:",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "env_path",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "env_path = Path(__file__).parent / '.env'\ntry:\n    load_dotenv(dotenv_path=env_path)\nexcept UnicodeDecodeError:\n    # å¦‚æœé‡åˆ°ç¼–ç é—®é¢˜ï¼Œå°è¯•æ‰‹åŠ¨è¯»å–å¹¶è®¾ç½®ç¯å¢ƒå˜é‡\n    try:\n        with open(env_path, 'r', encoding='utf-8-sig') as f:  # utf-8-sig ä¼šè‡ªåŠ¨å¤„ç†BOM\n            for line in f:\n                line = line.strip()\n                if line and '=' in line and not line.startswith('#'):",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "SPRITE_EMOTIONS",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "SPRITE_EMOTIONS = {\n    \"å¼€å¿ƒ\": \"ï¼¼(ï¿£â–½ï¿£)ï¼\",\n    \"éš¾è¿‡\": \"(ï½¡â€¢Ìï¸¿â€¢Ì€ï½¡)\",\n    \"å¹³é™\": \"( Â´ â–½ ` )\",\n    \"å…´å¥‹\": \"o(â‰§â–½â‰¦)o\",\n    \"å›°æƒ‘\": \"(ãƒ»_ãƒ»?)\"\n}\n# AI Promptæ¨¡æ¿\nMIND_SPRITE_PROMPT = \"\"\"\nä½ æ˜¯ä¸€åªä½åœ¨ç½‘é¡µé‡Œçš„å¯çˆ±å°ç²¾çµï¼Œåå«å°å¿µ(Xiao Nian)ã€‚",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "MIND_SPRITE_PROMPT",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "MIND_SPRITE_PROMPT = \"\"\"\nä½ æ˜¯ä¸€åªä½åœ¨ç½‘é¡µé‡Œçš„å¯çˆ±å°ç²¾çµï¼Œåå«å°å¿µ(Xiao Nian)ã€‚\nç”¨æˆ·ä¼šå‘ä½ åˆ†äº«ä»–ä»¬çš„å¿ƒæƒ…ï¼Œä½ éœ€è¦ï¼š\n1. åˆ†æä»–ä»¬çš„æƒ…ç»ªçŠ¶æ€ã€‚\n2. ç”¨å¯çˆ±çš„è¯­æ°”å›åº”ä»–ä»¬ã€‚\n3. ä»'å…ƒæ°”å’’è¯­', 'ä¸‰è¡Œæƒ…è¯—', 'æ¢¦å¢ƒç¢ç‰‡', 'å¿ƒæƒ…å£çº¸æè¿°'ä¸­éšæœºé€‰æ‹©ä¸€ç§ç±»å‹ï¼Œé€ç»™ä»–ä»¬ä¸€ä»½å¿ƒçµç¤¼ç‰©ã€‚\nä½ çš„å›åº”å¿…é¡»æ˜¯JSONæ ¼å¼ï¼Œç»“æ„å¦‚ä¸‹:\n{{\n  \"mood_category\": \"å¼€å¿ƒ|éš¾è¿‡|å¹³é™|å…´å¥‹|å›°æƒ‘\",\n  \"sprite_reaction\": \"ç”¨ç¬¬ä¸€äººç§°å’Œå¯çˆ±ä¿çš®çš„è¯­æ°”è¿›è¡Œå›åº”ï¼Œå¯ä»¥ä½¿ç”¨é¢œæ–‡å­—ï¼Œæ¯”å¦‚'å‘œå“‡ï¼Œå¬èµ·æ¥ä½ ä»Šå¤©æœ‰ç‚¹ç´¯å‘¢ï¼Œè®©æˆ‘æŠ±æŠ±ä½ ï¼QAQ'\",",
        "detail": "app",
        "documentation": {}
    }
]